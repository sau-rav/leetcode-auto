<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Solve Later Problems</title>

  <style>
    :root {
      --bg: #f7f9fc;
      --card: #ffffff;
      --text: #222;
      --muted: #6b7280;
      --border: #d1d5db;
      --primary: #2563eb;
    }

    body.dark {
      --bg: #0f172a;
      --card: #1e293b;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --border: #334155;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg);
      margin: 0;
      padding: 24px;
      color: var(--text);
    }

    h1 { margin-bottom: 12px; }

    nav { margin-bottom: 20px; }

    nav a {
      text-decoration: none;
      margin-right: 16px;
      font-weight: 500;
      color: var(--primary);
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .toggle {
      background: var(--primary);
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
    }

    .search-box {
      margin-bottom: 20px;
      max-width: 400px;
    }

    .search-box input {
      width: 100%;
      padding: 10px 14px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--card);
      color: var(--text);
      font-size: 14px;
    }

    ul {
      list-style: none;
      padding: 0;
      max-width: 900px;
    }

    li {
      background: var(--card);
      border-radius: 10px;
      padding: 16px 18px;
      margin-bottom: 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.06);
    }

    .problem-info { max-width: 75%; }

    .problem-info a {
      font-size: 16px;
      font-weight: 600;
      color: var(--text);
      text-decoration: none;
    }

    .meta {
      margin-top: 6px;
      font-size: 14px;
      color: var(--muted);
    }

    .difficulty {
      font-weight: 600;
      padding: 2px 8px;
      border-radius: 6px;
      margin-left: 6px;
    }

    .easy { background: #dcfce7; color: #166534; }
    .medium { background: #fef3c7; color: #92400e; }
    .hard { background: #fee2e2; color: #991b1b; }

    button {
      background: var(--primary);
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      white-space: nowrap;
    }

    button.copied { background: #16a34a; }

    .pagination {
      margin-top: 20px;
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .pagination button:disabled {
      background: #9ca3af;
      cursor: not-allowed;
    }

    .empty {
      background: var(--card);
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.06);
    }
  </style>
</head>

<body>
  <div class="top-bar">
    <h1>Solve Later Problems</h1>
    <button class="toggle" id="themeToggle">ðŸŒ™</button>
  </div>

  <nav>
    <a href="index.html">Today</a>
    <a href="solved.html">Solved Problems</a>
    <a href="solve_later.html">Solve Later Problems</a>
  </nav>

  <div class="search-box">
    <input
      type="text"
      id="search"
      placeholder="Search (top 5 results)..."
    />
  </div>

  <ul id="list"></ul>

  <div class="pagination" id="pagination">
    <button id="prev">Prev</button>
    <span id="pageInfo"></span>
    <button id="next">Next</button>
  </div>

  <script>
    const PAGE_SIZE = 10;

    let allProblems = [];
    let currentPage = 1;

    const list = document.getElementById("list");
    const searchInput = document.getElementById("search");
    const pagination = document.getElementById("pagination");
    const prevBtn = document.getElementById("prev");
    const nextBtn = document.getElementById("next");
    const pageInfo = document.getElementById("pageInfo");

    fetch("./data/state.json")
      .then(r => r.json())
      .then(state => {
        allProblems = state.problems.filter(p => p.solve_later === true);
        renderPage();
      });

    searchInput.addEventListener("input", () => {
      const q = searchInput.value.trim().toLowerCase();

      if (!q) {
        pagination.style.display = "flex";
        currentPage = 1;
        renderPage();
        return;
      }

      const results = allProblems
        .filter(p =>
          p.title.toLowerCase().includes(q) ||
          p.slug.toLowerCase().includes(q) ||
          p.difficulty.toLowerCase().includes(q)
        )
        .slice(0, 5);

      pagination.style.display = "none";
      renderList(results);
    });

    prevBtn.onclick = () => {
      if (currentPage > 1) {
        currentPage--;
        renderPage();
      }
    };

    nextBtn.onclick = () => {
      if (currentPage * PAGE_SIZE < allProblems.length) {
        currentPage++;
        renderPage();
      }
    };

    function renderPage() {
      const start = (currentPage - 1) * PAGE_SIZE;
      const items = allProblems.slice(start, start + PAGE_SIZE);
      renderList(items);

      pageInfo.textContent =
        `Page ${currentPage} of ${Math.ceil(allProblems.length / PAGE_SIZE)}`;

      prevBtn.disabled = currentPage === 1;
      nextBtn.disabled = currentPage * PAGE_SIZE >= allProblems.length;
    }

    function renderList(problems) {
      list.innerHTML = "";

      if (!problems.length) {
        list.innerHTML = `<li class="empty">No problems found</li>`;
        return;
      }

      problems.forEach(p => {
        const li = document.createElement("li");
        const difficultyClass = p.difficulty.toLowerCase();

        li.innerHTML = `
          <div class="problem-info">
            <a href="https://leetcode.com/problems/${p.slug}" target="_blank">
              ${p.title}
            </a>
            <div class="meta">
              ${p.slug}
              â€¢ <span class="difficulty ${difficultyClass}">${p.difficulty}</span>
              â€¢ <strong>${p.status}</strong>
            </div>
          </div>
          <button>Copy Slug</button>
        `;

        const btn = li.querySelector("button");
        btn.onclick = () => {
          navigator.clipboard.writeText(p.slug).then(() => {
            btn.textContent = "Copied!";
            btn.classList.add("copied");
            setTimeout(() => {
              btn.textContent = "Copy Slug";
              btn.classList.remove("copied");
            }, 1200);
          });
        };

        list.appendChild(li);
      });
    }

    // Dark mode
    const body = document.body;
    const toggle = document.getElementById("themeToggle");

    if (localStorage.theme === "dark") body.classList.add("dark");

    toggle.onclick = () => {
      body.classList.toggle("dark");
      localStorage.theme = body.classList.contains("dark") ? "dark" : "light";
    };
  </script>
</body>
</html>

