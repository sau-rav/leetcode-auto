<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Today's LeetCode Problems</title>

  <style>
    /* ---------- THEME VARIABLES ---------- */
    :root {
      --bg: #f7f9fc;
      --card: #ffffff;
      --text: #222;
      --heading: #111827;
      --muted: #6b7280;
      --link: #2563eb;
      --code-bg: #f1f5f9;
      --shadow: rgba(0,0,0,0.06);
    }

    body.dark {
      --bg: #0f172a;
      --card: #1e293b;
      --text: #e5e7eb;
      --heading: #f9fafb;
      --muted: #9ca3af;
      --link: #60a5fa;
      --code-bg: #334155;
      --shadow: rgba(0,0,0,0.4);
    }

    /* ---------- BASE STYLES ---------- */
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg);
      margin: 0;
      padding: 24px;
      color: var(--text);
      transition: background 0.2s ease, color 0.2s ease;
    }

    h1 {
      margin-bottom: 12px;
      color: var(--heading);
    }

    nav {
      margin-bottom: 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    nav a {
      text-decoration: none;
      margin-right: 16px;
      font-weight: 500;
      color: var(--link);
    }

    nav a:hover {
      text-decoration: underline;
    }

    .theme-toggle {
      cursor: pointer;
      padding: 6px 10px;
      border-radius: 8px;
      background: var(--card);
      box-shadow: 0 2px 6px var(--shadow);
      font-size: 14px;
    }

    ul {
      list-style: none;
      padding: 0;
      max-width: 900px;
    }

    li {
      background: var(--card);
      border-radius: 10px;
      padding: 16px 18px;
      margin-bottom: 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 10px var(--shadow);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    li:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 18px var(--shadow);
    }

    .problem-info {
      max-width: 75%;
    }

    .problem-info a {
      font-size: 16px;
      font-weight: 600;
      color: var(--heading);
      text-decoration: none;
    }

    .problem-info a:hover {
      text-decoration: underline;
    }

    .meta {
      margin-top: 6px;
      font-size: 14px;
      color: var(--muted);
    }

    .difficulty {
      font-weight: 600;
      padding: 2px 8px;
      border-radius: 6px;
      margin-left: 6px;
    }

    .easy {
      background: #dcfce7;
      color: #166534;
    }

    .medium {
      background: #fef3c7;
      color: #92400e;
    }

    .hard {
      background: #fee2e2;
      color: #991b1b;
    }

    button {
      background: #2563eb;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 13px;
      cursor: pointer;
      transition: background 0.15s ease;
      white-space: nowrap;
    }

    button:hover {
      background: #1d4ed8;
    }

    button.copied {
      background: #16a34a;
    }

    code {
      background: var(--code-bg);
      padding: 2px 6px;
      border-radius: 6px;
      font-size: 13px;
      margin-left: 4px;
    }

    .empty {
      background: var(--card);
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 10px var(--shadow);
    }

    @media (max-width: 640px) {
      li {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
      }

      .problem-info {
        max-width: 100%;
      }
    }
  </style>
</head>

<body>
  <h1>Today's LeetCode Problems</h1>

  <nav>
    <div>
      <a href="index.html">Today</a>
      <a href="solved.html">Solved Problems</a>
      <a href="solve_later.html">Solve Later Problems</a>
    </div>

    <!-- Dark mode toggle -->
    <div class="theme-toggle" onclick="toggleTheme()">üåó</div>
    </nav>

        <input
              id="search"
              type="text"
              placeholder="Search by title or slug..."
              style="
                width: 100%;
                max-width: 900px;
                padding: 12px 14px;
                margin-bottom: 18px;
                border-radius: 10px;
                border: 1px solid #e5e7eb;
                font-size: 15px;
                background: var(--card);
                color: var(--text);
                box-shadow: 0 4px 10px var(--shadow);
              "
            />

      <ul id="list"></ul>
      <div id="pagination" style="
      max-width: 900px;
      margin-top: 20px;
      display: flex;
      justify-content: center;
      gap: 12px;
    ">
      <button id="prevBtn">‚Üê Prev</button>
      <span id="pageInfo" style="align-self:center;"></span>
      <button id="nextBtn">Next ‚Üí</button>
    </div>


    <script>
  /* ---------- DARK MODE ---------- */
  function toggleTheme() {
    document.body.classList.toggle("dark");
    localStorage.theme = document.body.classList.contains("dark")
      ? "dark"
      : "light";
  }

  if (localStorage.theme === "dark") {
    document.body.classList.add("dark");
  }

  /* ---------- CONFIG ---------- */
  const PAGE_SIZE = 10;
  let currentPage = 1;

  let allProblems = [];
  let visibleProblems = [];

  const list = document.getElementById("list");
  const searchInput = document.getElementById("search");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");
  const pageInfo = document.getElementById("pageInfo");

  const today = new Date().toISOString().split("T")[0];

  /* ---------- FILTER ---------- */
  function applySearch() {
    const q = searchInput.value.trim().toLowerCase();

    visibleProblems = allProblems.filter(p =>
      p.title.toLowerCase().includes(q) ||
      p.slug.toLowerCase().includes(q)
    );

    currentPage = 1;
    renderPage();
  }

  /* ---------- RENDER ---------- */
  function renderPage() {
    list.innerHTML = "";

    if (visibleProblems.length === 0) {
      list.innerHTML = `
        <li class="empty">üîç No problems match your search</li>
      `;
      document.getElementById("pagination").style.display = "none";
      return;
    }

    document.getElementById("pagination").style.display = "flex";

    const totalPages = Math.ceil(visibleProblems.length / PAGE_SIZE);
    const start = (currentPage - 1) * PAGE_SIZE;
    const end = start + PAGE_SIZE;

    visibleProblems.slice(start, end).forEach(p => {
      const li = document.createElement("li");

      const info = document.createElement("div");
      info.className = "problem-info";

      const difficultyClass = p.difficulty.toLowerCase();

      info.innerHTML = `
        <a href="https://leetcode.com/problems/${p.slug}" target="_blank">
          ${p.title}
        </a>
        <div class="meta">
          <code>${p.slug}</code>
          ‚Ä¢ <span class="difficulty ${difficultyClass}">
            ${p.difficulty}
          </span>
          ‚Ä¢ <strong>${p.status}</strong>
        </div>
      `;

      const copyBtn = document.createElement("button");
      copyBtn.textContent = "Copy Slug";
      copyBtn.onclick = () => {
        navigator.clipboard.writeText(p.slug).then(() => {
          copyBtn.textContent = "Copied!";
          copyBtn.classList.add("copied");
          setTimeout(() => {
            copyBtn.textContent = "Copy Slug";
            copyBtn.classList.remove("copied");
          }, 1200);
        });
      };

      li.appendChild(info);
      li.appendChild(copyBtn);
      list.appendChild(li);
    });

    pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
    prevBtn.disabled = currentPage === 1;
    nextBtn.disabled = currentPage === totalPages;
  }

  /* ---------- LOAD DATA ---------- */
  fetch("./data/state.json")
    .then(r => r.json())
    .then(state => {

      // 1Ô∏è‚É£ Today‚Äôs assigned
      allProblems = state.problems.filter(p =>
        p.status === "pending" &&
        !p.solve_later &&
        p.assigned_on === today
      );

      // 2Ô∏è‚É£ Fallback
      if (allProblems.length === 0) {
        allProblems = state.problems.filter(p =>
          p.status === "pending" &&
          !p.solve_later &&
          p.assigned_on === null
        );
      }

      if (allProblems.length === 0) {
        list.innerHTML = `
          <li class="empty">üéâ No pending problems available</li>
        `;
        document.getElementById("pagination").style.display = "none";
        return;
      }

      visibleProblems = [...allProblems];
      renderPage();
    });

  /* ---------- EVENTS ---------- */
  searchInput.addEventListener("input", applySearch);

  prevBtn.onclick = () => {
    if (currentPage > 1) {
      currentPage--;
      renderPage();
    }
  };

  nextBtn.onclick = () => {
    const totalPages = Math.ceil(visibleProblems.length / PAGE_SIZE);
    if (currentPage < totalPages) {
      currentPage++;
      renderPage();
    }
  };
</script>


</body>
</html>

