<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Solved Problems</title>

  <style>
    /* ---------- THEME VARIABLES ---------- */
    :root {
      --bg: #f7f9fc;
      --card: #ffffff;
      --text: #222;
      --heading: #111827;
      --muted: #6b7280;
      --link: #2563eb;
      --border: #d1d5db;
      --shadow: rgba(0,0,0,0.06);
    }

    body.dark {
      --bg: #0f172a;
      --card: #1e293b;
      --text: #e5e7eb;
      --heading: #f9fafb;
      --muted: #9ca3af;
      --link: #60a5fa;
      --border: #334155;
      --shadow: rgba(0,0,0,0.4);
    }

    /* ---------- BASE ---------- */
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg);
      margin: 0;
      padding: 24px;
      color: var(--text);
      transition: background 0.2s ease, color 0.2s ease;
    }

    h1 {
      margin-bottom: 12px;
      color: var(--heading);
    }

    nav {
      margin-bottom: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    nav a {
      text-decoration: none;
      margin-right: 16px;
      font-weight: 500;
      color: var(--link);
    }

    nav a:hover {
      text-decoration: underline;
    }

    .theme-toggle {
      cursor: pointer;
      padding: 6px 10px;
      border-radius: 8px;
      background: var(--card);
      box-shadow: 0 2px 6px var(--shadow);
      font-size: 14px;
    }

    /* ---------- SEARCH ---------- */
    .search-box {
      margin-bottom: 20px;
      max-width: 400px;
    }

    .search-box input {
      width: 100%;
      padding: 10px 14px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--card);
      color: var(--text);
      font-size: 14px;
    }

    /* ---------- LIST ---------- */
    ul {
      list-style: none;
      padding: 0;
      max-width: 900px;
    }

    li {
      background: var(--card);
      border-radius: 10px;
      padding: 16px 18px;
      margin-bottom: 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 10px var(--shadow);
    }

    .problem-info a {
      font-size: 16px;
      font-weight: 600;
      color: var(--heading);
      text-decoration: none;
    }

    .problem-info a:hover {
      text-decoration: underline;
    }

    .meta {
      margin-top: 6px;
      font-size: 14px;
      color: var(--muted);
    }

    .difficulty {
      font-weight: 600;
      padding: 2px 8px;
      border-radius: 6px;
      margin-left: 6px;
    }

    .easy { background: #dcfce7; color: #166534; }
    .medium { background: #fef3c7; color: #92400e; }
    .hard { background: #fee2e2; color: #991b1b; }

    /* ---------- PAGINATION ---------- */
    .pagination {
      margin-top: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .pagination button {
      padding: 8px 14px;
      border-radius: 8px;
      border: none;
      background: #2563eb;
      color: white;
      cursor: pointer;
    }

    .pagination button:disabled {
      background: #9ca3af;
      cursor: not-allowed;
    }

    .empty {
      background: var(--card);
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 10px var(--shadow);
    }
  </style>
</head>

<body>
  <h1>Solved Problems</h1>

  <nav>
    <div>
      <a href="index.html">Today</a>
      <a href="solved.html">Solved Problems</a>
      <a href="solve_later.html">Solve Later Problems</a>
    </div>

    <!-- ðŸŒ— Dark mode toggle -->
    <div class="theme-toggle" onclick="toggleTheme()">ðŸŒ—</div>
  </nav>

  <!-- ðŸ” Search -->
  <div class="search-box">
    <input
      id="search"
      type="text"
      placeholder="Search solved problems (top 5 results)..."
    />
  </div>

  <ul id="list"></ul>

  <!-- Pagination -->
  <div class="pagination" id="pagination">
    <button id="prev">Prev</button>
    <span id="pageInfo"></span>
    <button id="next">Next</button>
  </div>

  <script>
    /* ---------- DARK MODE ---------- */
    function toggleTheme() {
      document.body.classList.toggle("dark");
      localStorage.theme = document.body.classList.contains("dark")
        ? "dark"
        : "light";
    }

    if (localStorage.theme === "dark") {
      document.body.classList.add("dark");
    }

    /* ---------- EXISTING LOGIC (UNCHANGED) ---------- */
    const PAGE_SIZE = 10;

    let solvedProblems = [];
    let currentPage = 1;

    const list = document.getElementById("list");
    const searchInput = document.getElementById("search");
    const pagination = document.getElementById("pagination");
    const prevBtn = document.getElementById("prev");
    const nextBtn = document.getElementById("next");
    const pageInfo = document.getElementById("pageInfo");

    fetch("./data/state.json")
      .then(r => r.json())
      .then(state => {
        solvedProblems = state.problems.filter(p => p.status === "solved");
        renderPage();
      });

    searchInput.addEventListener("input", () => {
      const q = searchInput.value.trim().toLowerCase();

      if (!q) {
        pagination.style.display = "flex";
        currentPage = 1;
        renderPage();
        return;
      }

      const results = solvedProblems
        .filter(p =>
          p.title.toLowerCase().includes(q) ||
          p.slug.toLowerCase().includes(q) ||
          p.difficulty.toLowerCase().includes(q)
        )
        .slice(0, 5);

      pagination.style.display = "none";
      renderList(results);
    });

    prevBtn.onclick = () => {
      if (currentPage > 1) {
        currentPage--;
        renderPage();
      }
    };

    nextBtn.onclick = () => {
      const totalPages = Math.ceil(solvedProblems.length / PAGE_SIZE);
      if (currentPage < totalPages) {
        currentPage++;
        renderPage();
      }
    };

    function renderPage() {
      const start = (currentPage - 1) * PAGE_SIZE;
      const pageItems = solvedProblems.slice(start, start + PAGE_SIZE);

      renderList(pageItems);

      const totalPages = Math.ceil(solvedProblems.length / PAGE_SIZE);
      pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;

      prevBtn.disabled = currentPage === 1;
      nextBtn.disabled = currentPage === totalPages;
    }

    function renderList(problems) {
      list.innerHTML = "";

      if (!problems.length) {
        list.innerHTML = `<li class="empty">No problems found</li>`;
        return;
      }

      problems.forEach(p => {
        const li = document.createElement("li");
        const difficultyClass = p.difficulty.toLowerCase();

        li.innerHTML = `
          <div class="problem-info">
            <a href="https://leetcode.com/problems/${p.slug}" target="_blank">
              ${p.title}
            </a>
            <div class="meta">
              ${p.slug}
              â€¢ <span class="difficulty ${difficultyClass}">
                ${p.difficulty}
              </span>
              â€¢ <strong>${p.status}</strong>
            </div>
          </div>
        `;

        list.appendChild(li);
      });
    }
  </script>
</body>
</html>

